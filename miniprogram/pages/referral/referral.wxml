<!-- æ¨èå¥–åŠ±é¡µé¢ -->
<view class="referral-container">
  <!-- æ¸å˜èƒŒæ™¯ -->
  <view class="referral-background"></view>
  
  <!-- èƒŒæ™¯è£…é¥°å…ƒç´  -->
  <view class="decorative-elements">
    <view class="decorative-circle decorative-circle-1"></view>
    <view class="decorative-circle decorative-circle-2"></view>
    <view class="floating-hearts">
      <block wx:for="{{[0,1,2,3,4]}}" wx:key="*this">
        <view class="heart-animation heart-{{index}}">ğŸ’–</view>
      </block>
    </view>
  </view>
  
  <!-- æ‰‹æœºå®¹å™¨ -->
  <view class="mobile-container">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <view class="top-navigation">
      <button class="nav-btn" bindtap="navigateBack">
        <text class="nav-icon">â†</text>
      </button>
      <text class="nav-title">æ¨èå¥–åŠ±</text>
      <button class="nav-btn">
        <text class="nav-icon">â‹¯</text>
      </button>
    </view>
    
    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <scroll-view scroll-y class="main-content">
      <!-- æ¨èå¤´éƒ¨ -->
      <view class="referral-header">
        <view class="header-content">
          <view class="app-title-row">
            <text class="crown-icon">ğŸ‘‘</text>
            <text class="app-title">å–µå–µç¾é¢œ</text>
            <text class="crown-icon">ğŸ‘‘</text>
          </view>
          <text class="app-subtitle">é‚€è¯·å¥½å‹ï¼Œå…±äº«ç¾ä¸½</text>
          
          <!-- ç´¯è®¡æ”¶ç›Š -->
          <view class="earnings-card">
            <view class="earnings-header">
              <text class="sparkle-icon">âœ¨</text>
              <text class="earnings-label">ç´¯è®¡æ”¶ç›Š</text>
            </view>
            <view class="earnings-amount">
              <text class="currency-symbol">Â¥</text>
              <text class="amount-main">2,888</text>
              <text class="amount-decimal">.88</text>
            </view>
          </view>
          
          <!-- çŒ«å’ªå‰ç¥¥ç‰© -->
          <view class="cat-mascot">
            <image src="{{catMascotImage}}" mode="aspectFill" class="mascot-image" />
          </view>
        </view>
      </view>
      
      <!-- é‚€è¯·ç åŒºåŸŸ -->
      <view class="invite-code-section">
        <view class="invite-card">
          <view class="invite-header">
            <text class="invite-title">æˆ‘çš„ä¸“å±é‚€è¯·ç </text>
          </view>
          <view class="code-display">
            <text class="invite-code">{{inviteCode}}</text>
            <text class="code-description">åˆ†äº«ç»™å¥½å‹ï¼ŒåŒæ–¹éƒ½èƒ½è·å¾—å¥–åŠ±</text>
          </view>
          <view class="action-buttons">
            <button class="copy-btn" bindtap="copyInviteCode">
              <text class="copy-icon">ğŸ“‹</text>
              <text class="copy-text">å¤åˆ¶é‚€è¯·ç </text>
            </button>
            <button class="share-btn" bindtap="shareInviteCode">
              <text class="share-icon">ğŸ“¤</text>
              <text class="share-text">ç«‹å³åˆ†äº«</text>
            </button>
          </view>
        </view>
      </view>
      
      <!-- ç»Ÿè®¡æ•°æ®è¡Œ -->
      <view class="stats-section">
        <view class="stats-card">
          <view class="stats-grid">
            <view class="stat-item">
              <view class="stat-icon-wrapper">
                <text class="stat-icon users-icon">ğŸ‘¥</text>
              </view>
              <text class="stat-value">12</text>
              <text class="stat-unit">äºº</text>
              <text class="stat-label">å·²é‚€è¯·</text>
            </view>
            <view class="stat-item">
              <view class="stat-icon-wrapper">
                <text class="stat-icon active-icon">âœ…</text>
              </view>
              <text class="stat-value">8</text>
              <text class="stat-unit">äºº</text>
              <text class="stat-label">æ´»è·ƒç”¨æˆ·</text>
            </view>
            <view class="stat-item">
              <view class="stat-icon-wrapper">
                <text class="stat-icon coins-icon">ğŸ’°</text>
              </view>
              <text class="stat-value">588</text>
              <text class="stat-unit">å…ƒ</text>
              <text class="stat-label">æœ¬æœˆæ”¶ç›Š</text>
            </view>
          </view>
        </view>
      </view>
      
      <!-- VIPç¤¼å“å¡ -->
      <view class="vip-gift-cards-section">
        <view class="section-header">
          <text class="section-icon">ğŸ</text>
          <text class="section-title">VIPç¤¼å“å¡</text>
          <text class="gift-badge">å¯è½¬èµ </text>
        </view>
        
        <view class="gift-cards-list">
          <block wx:for="{{giftCards}}" wx:key="id">
            <view class="gift-card">
              <view class="card-header">
                <view class="card-icon-wrapper {{item.gradientClass}}">
                  <text class="card-icon">{{item.icon}}</text>
                </view>
                <view class="card-info">
                  <view class="card-title-row">
                    <text class="card-title">{{item.title}}</text>
                    <text class="available-badge">x{{item.available}}</text>
                  </view>
                  <text class="card-subtitle">{{item.subtitle}}</text>
                  <view class="price-row">
                    <text class="current-price">{{item.value}}</text>
                    <text class="original-price">{{item.originalPrice}}</text>
                  </view>
                </view>
                <button class="transfer-btn">è½¬èµ </button>
              </view>
              <view class="card-features">
                <block wx:for="{{item.features}}" wx:key="*this" wx:for-item="feature">
                  <text class="feature-tag">{{feature}}</text>
                </block>
              </view>
            </view>
          </block>
        </view>
      </view>
      
      <!-- å¥–åŠ±ç­‰çº§ -->
      <view class="reward-tiers-section">
        <view class="section-header">
          <text class="section-icon">ğŸ“ˆ</text>
          <text class="section-title">å¥–åŠ±ç­‰çº§</text>
        </view>
        
        <view class="reward-tiers-list">
          <block wx:for="{{rewardTiers}}" wx:key="id">
            <view class="reward-tier {{item.isAchieved ? 'achieved' : ''}}">
              <block wx:if="{{item.isAchieved}}">
                <view class="achievement-badge">å·²è¾¾æˆ</view>
              </block>
              <view class="tier-content">
                <view class="tier-icon-wrapper {{item.colorClass}}">
                  <text class="tier-icon">{{item.icon}}</text>
                </view>
                <view class="tier-info">
                  <view class="tier-title-row">
                    <text class="tier-title">{{item.title}}</text>
                    <block wx:if="{{item.isAchieved}}">
                      <text class="achieved-icon">âœ“</text>
                    </block>
                  </view>
                  <text class="tier-description">{{item.description}}</text>
                  <view class="progress-container">
                    <view class="progress-bar">
                      <view class="progress-fill {{item.isAchieved ? 'achieved' : ''}}" style="width: {{item.progress}}%;"></view>
                    </view>
                    <text class="progress-text">{{item.completed}}/{{item.total}}</text>
                  </view>
                </view>
                <view class="tier-reward">
                  <text class="reward-amount">{{item.reward}}</text>
                  <block wx:if="{{item.isAchieved}}">
                    <text class="reward-status">å·²è·å¾—</text>
                  </block>
                </view>
              </view>
            </view>
          </block>
        </view>
      </view>
      
      <!-- ç”¨æˆ·å¥½è¯„ -->
      <view class="social-proof-section">
        <view class="section-header">
          <text class="section-icon">ğŸ’¬</text>
          <text class="section-title">ç”¨æˆ·å¥½è¯„</text>
        </view>
        
        <!-- ç”¨æˆ·è¯„ä»· -->
        <view class="testimonials-list">
          <block wx:for="{{testimonials}}" wx:key="id">
            <view class="testimonial-card">
              <image src="{{item.avatar}}" mode="aspectFill" class="user-avatar" />
              <view class="testimonial-content">
                <view class="user-info">
                  <text class="user-name">{{item.name}}</text>
                  <view class="star-rating">
                    <block wx:for="{{item.stars}}" wx:key="*this">
                      <text class="star">â­</text>
                    </block>
                  </view>
                </view>
                <text class="testimonial-text">{{item.text}}</text>
                <view class="earnings-badge">
                  <text class="earnings-text">ç´¯è®¡æ”¶ç›Š: {{item.earnings}}</text>
                </view>
              </view>
            </view>
          </block>
        </view>
        
        <!-- æˆå°±ç»Ÿè®¡ -->
        <view class="achievements-card">
          <view class="achievements-grid">
            <block wx:for="{{achievements}}" wx:key="*this" wx:for-item="achievement">
              <view class="achievement-item">
                <text class="achievement-icon">{{achievement.icon}}</text>
                <text class="achievement-value">{{achievement.value}}</text>
                <text class="achievement-label">{{achievement.label}}</text>
              </view>
            </block>
          </view>
        </view>
      </view>
    </scroll-view>
  </view>
</view>
