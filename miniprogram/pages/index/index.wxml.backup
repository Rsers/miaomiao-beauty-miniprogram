<!--index.wxml-->
<view class="container">
  <!-- 标题区域 -->
  <view class="header">
    <text class="title">喵喵美颜</text>
    <text class="subtitle">让每一张照片都变得更加清晰</text>
  </view>

  <!-- 版本选择区域 -->
  <view class="version-section">
    <view class="version-title">
      <text class="version-title-text">选择使用方式</text>
    </view>
    
    <!-- 小程序版 -->
    <view class="version-card mini-version">
      <view class="version-header">
        <text class="version-icon">📱</text>
        <text class="version-name">小程序版</text>
      </view>
      <text class="version-desc">快速单张图片增强</text>
      <view class="version-features">
        <text class="feature-item">✓ 单张图片处理</text>
        <text class="feature-item">✓ 快速增强</text>
        <text class="feature-item">✓ 即时预览</text>
      </view>
    </view>
    
    <!-- 完整版 -->
    <view class="version-card full-version" bindtap="openWebVersion">
      <view class="version-header">
        <text class="version-icon">🌐</text>
        <text class="version-name">完整版</text>
        <view class="recommend-badge">推荐</view>
      </view>
      <text class="version-desc">批量处理，功能更强大</text>
      <view class="version-features">
        <text class="feature-item">✓ 批量图片处理</text>
        <text class="feature-item">✓ 更多增强选项</text>
        <text class="feature-item">✓ 高级功能</text>
      </view>
      <button class="use-full-btn">立即使用</button>
    </view>
  </view>

  <!-- 小程序版功能区域 -->
  <view class="mini-features-section">
    <view class="section-title">
      <text>小程序版功能</text>
    </view>
    
    <!-- 图片上传区域 -->
  <view class="upload-section">
    <view wx:if="{{!selectedImage}}" class="upload-area" bindtap="chooseImage">
      <view class="upload-icon">📷</view>
      <text class="upload-text">点击选择图片</text>
      <text class="upload-hint">支持 JPG、PNG、AVIF 格式</text>
    </view>
    
    <view wx:else class="image-preview">
      <image class="preview-image" src="{{selectedImage}}" mode="aspectFit"></image>
      <view class="image-info">
        <text class="file-name">{{fileName}}</text>
        <text class="file-size">{{fileSize}}</text>
      </view>
      <button class="change-btn" bindtap="chooseImage">重新选择</button>
    </view>
  </view>

  <!-- 处理按钮 -->
  <view class="action-section" wx:if="{{selectedImage}}">
    <button 
      class="enhance-btn {{isProcessing ? 'processing' : ''}}" 
      bindtap="enhanceImage"
      disabled="{{isProcessing}}"
    >
      <text wx:if="{{!isProcessing}}">开始增强</text>
      <text wx:else>处理中...</text>
    </button>
  </view>

  <!-- 结果展示区域 -->
  <view class="result-section" wx:if="{{enhancedImage}}">
    <view class="result-title">
      <text>处理结果</text>
    </view>
    
    <view class="comparison-container">
      <!-- 原图 -->
      <view class="image-container">
        <text class="image-label">原图</text>
        <image class="result-image" src="{{selectedImage}}" mode="aspectFit"></image>
      </view>
      
      <!-- 处理后图片 -->
      <view class="image-container">
        <text class="image-label">增强后</text>
        <image class="result-image" src="{{enhancedImage}}" mode="aspectFit"></image>
      </view>
    </view>

    <!-- 下载按钮 -->
    <view class="download-section">
      <button class="download-btn" bindtap="downloadImage">下载增强图片</button>
    </view>
  </view>

  <!-- 处理进度提示 -->
  <view wx:if="{{isProcessing}}" class="processing-overlay">
    <view class="processing-content">
      <view class="loading-spinner"></view>
      <text class="processing-text">AI正在增强您的图片...</text>
      <text class="processing-hint">请耐心等待，通常需要10-30秒</text>
    </view>
  </view>
</view>
